# 영화관 예매 시스템 - 기능 목록

## 구현할 기능 목록

> 기능을 구현하기 전에 이 파일에 구현할 기능 목록을 정리해 추가한다.
> Git의 커밋 단위는 이 기능 목록 단위로 추가한다.

### 1. 데이터 로드
- [ ] `movies.md` 파일에서 영화 목록 로드
- [ ] `schedules.md` 파일에서 상영 시간표 로드
- [ ] 파일 파싱 예외 처리

### 2. 영화 목록 조회
- [ ] 전체 영화 목록 출력
- [ ] 영화 정보 표시 (제목, 상영시간, 등급)

### 3. 상영 시간표 조회
- [ ] 선택한 영화의 상영 시간표 출력
- [ ] 상영관, 시작시간, 종료시간, 시간대, 잔여좌석 표시
- [ ] 시간대 자동 판정 (조조/일반/심야)

### 4. 좌석 조회
- [ ] 선택한 상영의 좌석 배치도 출력
- [ ] 예매된 좌석 / 빈 좌석 구분 표시
- [ ] 일반석 / 프리미엄석 구분 표시
- [ ] 잔여 좌석 수 표시 (일반/프리미엄 분리)

### 5. 좌석 선택
- [ ] 예매할 좌석 수 입력 (최대 8석)
- [ ] 좌석 번호 입력 (예: A1,A2,A3)
- [ ] 좌석 유효성 검증
    - [ ] 존재하는 좌석인지 확인
    - [ ] 이미 예매된 좌석인지 확인
    - [ ] 입력한 좌석 수와 일치하는지 확인
- [ ] 좌석 연속성 검증
    - [ ] 같은 행인지 확인
    - [ ] 연속된 열인지 확인
    - [ ] 1석은 연속성 검증 제외

### 6. 관람객 정보 입력
- [ ] 좌석 수만큼 관람객 정보 입력
- [ ] 생년월일 입력 및 나이 계산
- [ ] 장애인 여부 입력
- [ ] 관람객 유형 자동 판별
    - [ ] 청소년 (만 13~18세)
    - [ ] 경로 (만 65세 이상)
    - [ ] 성인 (그 외)
    - [ ] 장애인 (별도 입력)
- [ ] 영화 연령 제한 검증

### 7. 요금 계산
- [ ] 좌석별 기본 요금 계산
    - [ ] 기본 요금: 14,000원
    - [ ] 프리미엄석 추가: +2,000원
    - [ ] 조조/심야 할인: -2,000원
- [ ] 관람객 할인 적용
    - [ ] 청소년: 20% 할인
    - [ ] 경로: 30% 할인
    - [ ] 장애인: 50% 할인
    - [ ] 중복 할인 시 최대 할인만 적용
- [ ] 총 결제 금액 계산

### 8. 예매 완료
- [ ] 예매 정보 확인 출력
- [ ] 예매 완료 여부 확인 (Y/N)
- [ ] 예매 번호 발급 (WC + 날짜 + 순번)
- [ ] 좌석 예매 상태 변경
- [ ] 예매 정보 저장

### 9. 예매 조회
- [ ] 예매 번호 입력
- [ ] 예매 내역 출력
- [ ] 존재하지 않는 예매 처리

### 10. 예매 취소
- [ ] 예매 번호 입력
- [ ] 예매 내역 출력
- [ ] 취소 가능 시간 검증 (상영 1시간 전까지)
- [ ] 취소 확인 (Y/N)
- [ ] 좌석 예매 상태 해제
- [ ] 예매 정보 삭제

---

## 예외 상황

### 공통
- [ ] 잘못된 메뉴 선택
- [ ] 빈 값 입력

### 영화/상영
- [ ] 존재하지 않는 영화 번호
- [ ] 존재하지 않는 상영 번호

### 좌석 선택
- [ ] 잘못된 좌석 형식
- [ ] 존재하지 않는 좌석
- [ ] 이미 예매된 좌석
- [ ] 연속되지 않은 좌석
- [ ] 최대 좌석 수 초과 (8석)
- [ ] 좌석 수 불일치

### 관람객
- [ ] 잘못된 생년월일 형식
- [ ] 영화 연령 제한 위반

### 예매 취소
- [ ] 존재하지 않는 예매 번호
- [ ] 취소 불가 시간 (상영 1시간 전 이후)

---

## 요금 계산 공식

### 좌석 기본 요금
```
좌석 기본 요금 = 14,000원 + 좌석 추가 요금 - 시간대 할인
```

### 좌석 추가 요금
```
일반석 (A~F행): 0원
프리미엄석 (G~H행): 2,000원
```

### 시간대 할인
```
조조 (10시 이전): 2,000원
일반 (10시 ~ 22시 전): 0원
심야 (22시 이후): 2,000원
```

### 관람객 할인
```
청소년 (13~18세): 좌석 기본 요금 × 20%
경로 (65세 이상): 좌석 기본 요금 × 30%
장애인: 좌석 기본 요금 × 50%
성인: 0원

※ 중복 할인 불가, 가장 큰 할인율만 적용
```

### 최종 요금
```
좌석별 최종 요금 = 좌석 기본 요금 - 관람객 할인
총 결제 금액 = 모든 좌석별 최종 요금의 합
```

---

## 좌석 배치

```
     1   2   3   4   5   6   7   8   9  10
  +----------------------------------------+
A |                                        |  ┐
B |                                        |  │
C |                                        |  │ 일반석
D |                                        |  │ (추가요금 없음)
E |                                        |  │
F |                                        |  ┘
  +----------------------------------------+
G |                                        |  ┐ 프리미엄석
H |                                        |  ┘ (+2,000원)
  +----------------------------------------+

총 80석 (일반 60석 + 프리미엄 20석)
```

---

## 예매 번호 형식

```
WC + YYYYMMDD + NNN

예: WC20240115001
- WC: 우아한 시네마 (Woowa Cinema)
- 20240115: 예매 날짜
- 001: 당일 순번
```